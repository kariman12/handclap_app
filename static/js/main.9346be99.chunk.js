(this.webpackJsonphandclap_app=this.webpackJsonphandclap_app||[]).push([[0],{75:function(e,t,a){e.exports=a(84)},80:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),i=a.n(s),l=(a(80),a(17)),o=a(18),c=a(14),p=a(22),u=a(20),d=a(122),m=a(61),h=Object(m.a)({palette:{primary:{light:"#9c786c",main:"#6d4c41",dark:"#40241a",contrastText:"#ffffff"},secondary:{light:"#ffa4a2",main:"#e57373",dark:"#af4448",contrastText:"#ffffff"}}}),g=a(4),v=a(123),f=a(124),_=a(48),C=a(62),E=a(110),b=a(113),x=a(129),y=a(118),N=a(114),O=a(127),j=a(128),S=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{className:this.props.classes.card},r.a.createElement(b.a,null,r.a.createElement(_.a,{variant:"h5",color:"primary"},"\u3042\u306a\u305f\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),r.a.createElement("div",{className:this.props.classes.user},r.a.createElement(j.a,{src:"".concat("/handclap_app","/").concat(this.props.userList[this.props.current_user_id].image),alt:this.props.userList[this.props.current_user_id].image,variant:"circle",className:this.props.classes.avatar}),r.a.createElement(N.a,{className:this.props.classes.formControl,onChange:function(t){e.props.handleCurrentUserChange(t)}},r.a.createElement(x.a,{id:"demo-simple-select-label"},"\u30e6\u30fc\u30b6\u3092\u9078\u629e"),r.a.createElement(O.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.props.current_user_id,onChange:function(t){e.props.handleCurrentUserChange(t)}},this.props.userList.map((function(e,t){return r.a.createElement(y.a,{value:String(t)},e.name)}))))),r.a.createElement("div",{className:this.props.classes.clapList},r.a.createElement(_.a,{variant:"h6",color:"primary"},"\u62cd\u624b\u51fa\u6765\u308b\u30dd\u30a4\u30f3\u30c8 : ".concat(this.props.getCountClapable(this.props.current_user_id))),r.a.createElement(_.a,{variant:"h6",color:"primary"},"\u62cd\u624b\u3055\u308c\u305f\u30dd\u30a4\u30f3\u30c8 : ".concat(this.props.getCountClapped(this.props.current_user_id))))))}}]),a}(r.a.Component),k=Object(g.a)((function(e){return{appbar:{alignItems:"center"},root:{padding:5*e.spacing.unit},content:{maxWidth:1e3,marginLeft:"auto",marginRight:"auto"},textfield:{margin:e.spacing(1),width:"1000px"},card:{margin:"10px"},user:{padding:5*e.spacing.unit,float:"left"},avatar:{width:e.spacing(15),height:e.spacing(15)},formControl:{margin:e.spacing.unit,minWidth:120},clapList:{padding:"80px"}}}))(S),w=a(119),L=a(130),U=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{className:this.props.classes.card},r.a.createElement(b.a,null,r.a.createElement(_.a,{variant:"h5",color:"primary"},"\u6295\u7a3f\u3059\u308b"),r.a.createElement("div",{className:this.props.classes.user},r.a.createElement(j.a,{src:"".concat("/handclap_app","/").concat(this.props.userList[this.props.to_user_id].image),alt:this.props.userList[this.props.to_user_id].image,variant:"circle",className:this.props.classes.avatar}),r.a.createElement(N.a,{className:this.props.classes.formControl,onChange:function(t){e.props.handleToUserChange(t)}},r.a.createElement(x.a,{id:"demo-simple-select-label"},"\u30e6\u30fc\u30b6\u3092\u9078\u629e"),r.a.createElement(O.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.props.to_user_id,onChange:function(t){e.props.handleToUserChange(t)}},this.props.userList.map((function(e,t){return r.a.createElement(y.a,{value:String(t)},e.name)}))))),r.a.createElement("div",{className:this.props.classes.formArea},r.a.createElement("form",{onSubmit:this.props.handleAdd},r.a.createElement(L.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"text",label:"\u8cde\u8cdb\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308d\u3046\uff01",name:"text",autoFocus:!0,className:this.props.classes.textfield}),r.a.createElement(w.a,{className:this.props.classes.submitButton,type:"submit",variant:"contained",color:"secondary"},"\u6295\u7a3f")))))}}]),a}(r.a.Component),A=Object(g.a)((function(e){return{textfield:{width:"500px",padding:"10px",float:"left"},card:{margin:"10px"},user:{padding:5*e.spacing.unit,float:"left"},avatar:{width:e.spacing(15),height:e.spacing(15)},formArea:{margin:"50px 0px",float:"left",width:"520px"},formControl:{margin:e.spacing.unit,minWidth:"120px"},submitButton:{margin:"0 10px",float:"right"}}}))(U),I=a(125),T=a(121),D=a(117),J=a(85),P=a(120),W=a(126),M=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={anchorEl:null,popover_id:null},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=Object(I.a)(),a=function(){e.setState({anchorEl:null,popover_id:null})},n=Boolean(this.state.anchorEl);return r.a.createElement(E.a,{className:this.props.classes.card},r.a.createElement(b.a,null,r.a.createElement(_.a,{variant:"h5",color:"primary"},"\u6295\u7a3f\u4e00\u89a7"),r.a.createElement(D.a,null,this.props.post_contents.map((function(s,i){return r.a.createElement("div",null,r.a.createElement(J.a,{divider:!0}),r.a.createElement(J.a,{key:i,className:e.props.classes.listItem},r.a.createElement("div",{className:e.props.classes.users},r.a.createElement("div",{className:e.props.classes.user},r.a.createElement(j.a,{src:"".concat("/handclap_app","/").concat(e.props.userList[s.current_user_id].image),alt:"userimage",variant:"circle",className:e.props.classes.avatar}),r.a.createElement(_.a,{variant:"p",color:"primary"},e.props.userList[s.current_user_id].name)),r.a.createElement("img",{src:"".concat("/handclap_app","/migi.png"),className:e.props.classes.migi,alt:"migiimage"}),r.a.createElement("div",{className:e.props.classes.user},r.a.createElement(j.a,{src:"".concat("/handclap_app","/").concat(e.props.userList[s.to_user_id].image),alt:"userimage",variant:"circle",className:e.props.classes.avatar}),r.a.createElement(_.a,{variant:"p",color:"primary"},e.props.userList[s.to_user_id].name))),r.a.createElement("div",{className:e.props.classes.postContents},r.a.createElement(P.a,null,s.text),r.a.createElement(P.a,{secondary:s.date,className:e.props.classes.dates}),r.a.createElement(w.a,{variant:"contained",color:"primary",endIcon:r.a.createElement(T.a,{className:"fas fa-sign-language fa-2x "+e.props.classes.clapMark}),value:i,onClick:function(t){e.props.handleAddCount(t,s.current_user_id,s.to_user_id)}},"\u62cd\u624b\u3059\u308b"),r.a.createElement("div",{className:e.props.classes.clapCount},r.a.createElement(_.a,{"aria-owns":n?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:function(t){return function(t,a){e.setState({anchorEl:t.currentTarget,popover_id:a})}(t,i)},onMouseLeave:a},e.props.getCountPost(i)),r.a.createElement(W.a,{id:"mouse-over-popover",className:e.props.classes.popover,classes:{paper:t.paper},open:n&&i===e.state.popover_id,anchorEl:e.state.anchorEl,anchorReference:e.state.anchorEl,onClose:a,disableRestoreFocus:!0},r.a.createElement(_.a,null,"\u62cd\u624b\u4e00\u89a7"),r.a.createElement(_.a,null,e.props.getClapDetail(i,e.props.userList)))))))})))))}}]),a}(r.a.Component),B=Object(g.a)((function(e){return{textfield:{margin:e.spacing(1),width:"1000px"},card:{margin:"10px"},users:{padding:"0px",float:"left"},user:{padding:"0px",float:"left"},avatar:{width:e.spacing(8),height:e.spacing(8)},migi:{width:"50px",float:"left",padding:"25px 10px"},postContents:{width:"400px",margin:"10px",padding:"10px",float:"left"},dates:{textAlign:"right"},popover:{pointerEvents:"none"},clapCount:{margin:"10px",padding:"10px",display:"inline-block"},clapMark:{color:"#fecb81"},listItem:{maxWidth:"700px"}}}))(M),R=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={current_user_id:"0",to_user_id:"0",post_content:[],clap_event:[]},n.handleAdd=n.handleAdd.bind(Object(c.a)(n)),n.handleAddCount=n.handleAddCount.bind(Object(c.a)(n)),n.handleCurrentUserChange=n.handleCurrentUserChange.bind(Object(c.a)(n)),n.handleToUserChange=n.handleToUserChange.bind(Object(c.a)(n)),n.getCountPost=n.getCountPost.bind(Object(c.a)(n)),n.getCountClapable=n.getCountClapable.bind(Object(c.a)(n)),n.getCountClapped=n.getCountClapped.bind(Object(c.a)(n)),n.getClapDetail=n.getClapDetail.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"handleCurrentUserChange",value:function(e){var t=e.target.value;this.setState({current_user_id:t})}},{key:"handleToUserChange",value:function(e){var t=e.target.value;this.setState({to_user_id:t})}},{key:"getNow",value:function(){var e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"handleAdd",value:function(e){if(e.preventDefault(),e.target.text.value.length>4){this.state.post_content.push({text:e.target.text.value,date:this.getNow(),current_user_id:this.state.current_user_id,to_user_id:this.state.to_user_id}),this.setState({post_content:this.state.post_content}),e.target.text.value="";var t=JSON.stringify(this.state.post_content);localStorage.setItem("post_content",t)}}},{key:"getCountUserPostClap",value:function(e,t){return this.state.clap_event.filter((function(a){return a.clap_user_id===String(e)&&a.post_id===String(t)})).length}},{key:"handleAddCount",value:function(e,t,a){if(this.state.current_user_id!==t&&this.state.current_user_id!==a&&this.getCountUserPostClap(this.state.current_user_id,e.currentTarget.value)<15){e.preventDefault(),this.state.clap_event.push({clap_user_id:this.state.current_user_id,post_id:e.currentTarget.value,from_user_id:t,to_user_id:a}),this.setState({clap_event:this.state.clap_event});var n=JSON.stringify(this.state.clap_event);localStorage.setItem("clap_event",n)}}},{key:"getCountPost",value:function(e){return this.state.clap_event.filter((function(t){return t.post_id===String(e)})).length}},{key:"getCountClapable",value:function(e){return 100-2*this.state.clap_event.filter((function(t){return t.clap_user_id===String(e)})).length+this.getCountClapped(e)}},{key:"getCountClapped",value:function(e){return this.state.clap_event.filter((function(t){return t.from_user_id===String(e)||t.to_user_id===String(e)})).length}},{key:"getCountUserClap",value:function(e,t){return t.filter((function(t){return t.clap_user_id===String(e)})).length}},{key:"getClapDetail",value:function(e,t){for(var a=this.state.clap_event.filter((function(t){return t.post_id===String(e)})),n=[],s=0;s<t.length;s++)this.getCountUserClap(s,a)>0&&n.push({name:t[s].name,count:this.getCountUserClap(s,a)});n.sort((function(e,t){return e.count<t.count?1:-1}));var i=n.map((function(e){return r.a.createElement("li",null,e.name," : ",e.count)}));return r.a.createElement("ul",null,i)}},{key:"render",value:function(){var e=[{name:"\u3071\u3093\u3060",image:"panda.jpg"},{name:"\u306d\u3053",image:"neko.jpg"},{name:"\u306f\u308a\u306d\u305a\u307f",image:"harinezumi.jpg"},{name:"\u3044\u306c",image:"inu.jpg"},{name:"\u308a\u3059",image:"risu.jpg"}],t=JSON.stringify(e);localStorage.setItem("userList",t);var a=localStorage.getItem("userList");e=JSON.parse(a);var n=localStorage.getItem("post_content");null!=n&&(this.state.post_content=JSON.parse(n)),console.log(this.state.post_content);var s=localStorage.getItem("clap_event");return null!=s&&(this.state.clap_event=JSON.parse(s)),console.log(this.state.clap_event),r.a.createElement("div",null,r.a.createElement(d.a,{theme:h},r.a.createElement(v.a,{position:"static",color:"primary",className:this.props.classes.appbar},r.a.createElement(f.a,null,r.a.createElement(_.a,{variant:"h4",color:"inherit"},"Handclap App"))),r.a.createElement(C.a,null,r.a.createElement("div",{className:this.props.classes.root},r.a.createElement("div",{className:this.props.classes.content},r.a.createElement(k,{current_user_id:this.state.current_user_id,userList:e,handleCurrentUserChange:this.handleCurrentUserChange,getCountClapable:this.getCountClapable,getCountClapped:this.getCountClapped}),r.a.createElement(A,{to_user_id:this.state.to_user_id,userList:e,handleToUserChange:this.handleToUserChange,handleAdd:this.handleAdd}),r.a.createElement(B,{post_contents:this.state.post_content,userList:e,clap_events:this.state.clap_event,handleAddCount:this.handleAddCount,getCountPost:this.getCountPost,getClapDetail:this.getClapDetail}))))))}}]),a}(r.a.Component),F=Object(g.a)((function(e){return{appbar:{alignItems:"center"},root:{padding:5*e.spacing.unit,backgroundColor:"#efebe9"},content:{maxWidth:900,marginLeft:"auto",marginRight:"auto"},textfield:{margin:e.spacing(1),width:"1000px"}}}))(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[75,1,2]]]);
//# sourceMappingURL=main.9346be99.chunk.js.map